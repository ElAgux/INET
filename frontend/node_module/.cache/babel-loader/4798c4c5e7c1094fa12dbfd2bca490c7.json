{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\vec2\\\\frontend\\\\src\\\\components\\\\ExportCSV.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ExportCSV = () => {\n  _s();\n\n  const [persona, setPersona] = useState([]);\n  useEffect(() => {\n    getPersona(); // getPersonaSearch();\n  }, []);\n\n  const getPersona = async () => {\n    const response = await axios.get(\"http://localhost:5000/persona\"); //setPersona(response.data.slice(currentPage, currentPage+i));\n\n    setPersona(response.data);\n  };\n\n  function convertArrayOfObjectsToCSV(array) {\n    let result;\n    const columnDelimiter = ',';\n    const lineDelimiter = '\\n';\n    const keys = Object.keys(persona[0]);\n    result = '';\n    result += keys.join(columnDelimiter);\n    result += lineDelimiter;\n    array.forEach(item => {\n      let ctr = 0;\n      keys.forEach(key => {\n        if (ctr > 0) result += columnDelimiter;\n        result += item[key];\n        ctr++;\n      });\n      result += lineDelimiter;\n    });\n    return result;\n  } // Blatant \"inspiration\" from https://codepen.io/Jacqueline34/pen/pyVoWr\n\n\n  function downloadCSV(array) {\n    const link = document.createElement('a');\n    let csv = convertArrayOfObjectsToCSV(array);\n    if (csv == null) return;\n    const filename = 'export.csv';\n\n    if (!csv.match(/^persona:text\\/csv/i)) {\n      csv = `persona:text/csv;charset=utf-8,${csv}`;\n    }\n\n    link.setAttribute('href', encodeURI(csv));\n    link.setAttribute('download', filename);\n    link.click();\n  }\n\n  const Export = _ref => {\n    let {\n      onExport\n    } = _ref;\n    return /*#__PURE__*/_jsxDEV(\"input\", {\n      onClick: e => onExport(e.target.value),\n      children: \"Export\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 38\n    }, this);\n  };\n\n  const actionsMemo = React.useMemo(() => /*#__PURE__*/_jsxDEV(Export, {\n    onExport: () => downloadCSV(persona)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 46\n  }, this), []);\n};\n\n_s(ExportCSV, \"y2sTqTTmaX8XFODaKz1XKLRiv3s=\");\n\n_c = ExportCSV;\nexport default ExportCSV;\n\nvar _c;\n\n$RefreshReg$(_c, \"ExportCSV\");","map":{"version":3,"names":["React","useState","useEffect","axios","ExportCSV","persona","setPersona","getPersona","response","get","data","convertArrayOfObjectsToCSV","array","result","columnDelimiter","lineDelimiter","keys","Object","join","forEach","item","ctr","key","downloadCSV","link","document","createElement","csv","filename","match","setAttribute","encodeURI","click","Export","onExport","e","target","value","actionsMemo","useMemo"],"sources":["C:/xampp/htdocs/vec2/frontend/src/components/ExportCSV.js"],"sourcesContent":["\r\nimport React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst ExportCSV = () => {\r\nconst [persona, setPersona] = useState([]);\r\nuseEffect(() => {\r\n    getPersona();\r\n   // getPersonaSearch();\r\n  }, []);\r\n\r\nconst getPersona = async () => {\r\n    const response = await axios.get(\"http://localhost:5000/persona\");\r\n    //setPersona(response.data.slice(currentPage, currentPage+i));\r\n    setPersona(response.data);\r\n  };\r\n\r\nfunction convertArrayOfObjectsToCSV(array) {\r\n\tlet result;\r\n\r\n    \tconst columnDelimiter = ',';\r\n    \tconst lineDelimiter = '\\n';\r\n    \tconst keys = Object.keys(persona[0]);\r\n    \r\n    \tresult = '';\r\n    \tresult += keys.join(columnDelimiter);\r\n    \tresult += lineDelimiter;\r\n    \r\n    \tarray.forEach(item => {\r\n\t\tlet ctr = 0;\r\n    \tkeys.forEach(key => {\r\n    \t\tif (ctr > 0) result += columnDelimiter;\r\n    \r\n    \t\t\tresult += item[key];\r\n    \t\t\t\r\n    \t\t\tctr++;\r\n    \t\t});\r\n    \t\tresult += lineDelimiter;\r\n    \t});\r\n    \r\n    \treturn result;\r\n    }\r\n    \r\n    // Blatant \"inspiration\" from https://codepen.io/Jacqueline34/pen/pyVoWr\r\n    function downloadCSV(array) {\r\n    \tconst link = document.createElement('a');\r\n    \tlet csv = convertArrayOfObjectsToCSV(array);\r\n    \tif (csv == null) return;\r\n    \r\n    \tconst filename = 'export.csv';\r\n    \r\n    \tif (!csv.match(/^persona:text\\/csv/i)) {\r\n    \t\tcsv = `persona:text/csv;charset=utf-8,${csv}`;\r\n    \t}\r\n    \r\n    \tlink.setAttribute('href', encodeURI(csv));\r\n    \tlink.setAttribute('download', filename);\r\n    \tlink.click();\r\n\r\n    }\r\n    \r\n    \r\n    const Export = ({ onExport }) => <input onClick={e => onExport(e.target.value)}>Export</input>;\r\n\r\n   \r\n    \tconst actionsMemo = React.useMemo(() => <Export onExport={() => downloadCSV(persona)} />, []);\r\n    \r\n}\r\nexport default ExportCSV;"],"mappings":";;;AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,MAAMC,SAAS,GAAG,MAAM;EAAA;;EACxB,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBL,QAAQ,CAAC,EAAD,CAAtC;EACAC,SAAS,CAAC,MAAM;IACZK,UAAU,GADE,CAEb;EACA,CAHM,EAGJ,EAHI,CAAT;;EAKA,MAAMA,UAAU,GAAG,YAAY;IAC3B,MAAMC,QAAQ,GAAG,MAAML,KAAK,CAACM,GAAN,CAAU,+BAAV,CAAvB,CAD2B,CAE3B;;IACAH,UAAU,CAACE,QAAQ,CAACE,IAAV,CAAV;EACD,CAJH;;EAMA,SAASC,0BAAT,CAAoCC,KAApC,EAA2C;IAC1C,IAAIC,MAAJ;IAEI,MAAMC,eAAe,GAAG,GAAxB;IACA,MAAMC,aAAa,GAAG,IAAtB;IACA,MAAMC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYX,OAAO,CAAC,CAAD,CAAnB,CAAb;IAEAQ,MAAM,GAAG,EAAT;IACAA,MAAM,IAAIG,IAAI,CAACE,IAAL,CAAUJ,eAAV,CAAV;IACAD,MAAM,IAAIE,aAAV;IAEAH,KAAK,CAACO,OAAN,CAAcC,IAAI,IAAI;MACzB,IAAIC,GAAG,GAAG,CAAV;MACGL,IAAI,CAACG,OAAL,CAAaG,GAAG,IAAI;QACnB,IAAID,GAAG,GAAG,CAAV,EAAaR,MAAM,IAAIC,eAAV;QAEZD,MAAM,IAAIO,IAAI,CAACE,GAAD,CAAd;QAEAD,GAAG;MACH,CANF;MAOCR,MAAM,IAAIE,aAAV;IACA,CAVD;IAYA,OAAOF,MAAP;EACA,CArCmB,CAuCpB;;;EACA,SAASU,WAAT,CAAqBX,KAArB,EAA4B;IAC3B,MAAMY,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAb;IACA,IAAIC,GAAG,GAAGhB,0BAA0B,CAACC,KAAD,CAApC;IACA,IAAIe,GAAG,IAAI,IAAX,EAAiB;IAEjB,MAAMC,QAAQ,GAAG,YAAjB;;IAEA,IAAI,CAACD,GAAG,CAACE,KAAJ,CAAU,qBAAV,CAAL,EAAuC;MACtCF,GAAG,GAAI,kCAAiCA,GAAI,EAA5C;IACA;;IAEDH,IAAI,CAACM,YAAL,CAAkB,MAAlB,EAA0BC,SAAS,CAACJ,GAAD,CAAnC;IACAH,IAAI,CAACM,YAAL,CAAkB,UAAlB,EAA8BF,QAA9B;IACAJ,IAAI,CAACQ,KAAL;EAEA;;EAGD,MAAMC,MAAM,GAAG;IAAA,IAAC;MAAEC;IAAF,CAAD;IAAA,oBAAkB;MAAO,OAAO,EAAEC,CAAC,IAAID,QAAQ,CAACC,CAAC,CAACC,MAAF,CAASC,KAAV,CAA7B;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAlB;EAAA,CAAf;;EAGC,MAAMC,WAAW,GAAGtC,KAAK,CAACuC,OAAN,CAAc,mBAAM,QAAC,MAAD;IAAQ,QAAQ,EAAE,MAAMhB,WAAW,CAAClB,OAAD;EAAnC;IAAA;IAAA;IAAA;EAAA,QAApB,EAAsE,EAAtE,CAApB;AAEJ,CA/DD;;GAAMD,S;;KAAAA,S;AAgEN,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}